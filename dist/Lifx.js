function Lifx(e){const t=window.$||window.jQuery||!1,r=this;if(r.base_url="https://api.lifx.com/v1/",r.token=e,!t)throw"jQuery is required for Lifx()";if(!r.token)throw"An API Authorization token is required. See: https://api.developer.lifx.com/docs/authentication";r.api={},r.api.call=function(e,o,i,n){if(o=o.replace(/^(\/)/,""),i=i||{},n="string"==typeof n?n:"lights/","object"==typeof i)for(var l in i)i[l]||delete i[l];return new Promise((l,a)=>{t.ajax({url:r.base_url+(t.trim(n)?n:"/")+o,type:e,data:i,headers:{Authorization:"Bearer "+r.token}}).then(function(e){l(e)},function(e){a(e)})})},r.api.post=function(e,t,o){return r.api.call("post",e,t)},r.api.get=function(e,t,o){return r.api.call("get",e,t)},r.api.put=function(e,t,o){return r.api.call("put",e,t)};const o=e=>((e="string"==typeof e?e:"all").replace(/^(\/)/,"").replace(/$(\/)/,""),e);r.list_lights=(e=>(e=o(e),r.api.get(e))),r.set_state=((e,i)=>{e=o(e);let n=t.extend({power:"on",color:"",brightness:null,duration:null,infrared:null},i||{});return r.api.put(e+"/state",n)}),r.set_states=((e,t)=>r.api.put("states",{states:e||[],defaults:t||{}})),r.state_delta=(e=>{throw e=o(e),"This function is currently not available."}),r.toggle_power=((e,i)=>{e=o(e);let n=t.extend({duration:null},i||{});return r.api.post(e+"/toggle",n)}),r.breath_effect=((e,i)=>{e=o(e);let n=t.extend({color:"",from_color:"",period:null,cycles:null,persist:!1,power_on:!0,peak:null},i||{});return r.api.post(e+"/effects/breathe",n)}),r.pulse_effect=((e,i)=>{e=o(e);let n=t.extend({color:"",from_color:"",period:null,cycles:null,persist:!1,power_on:!0},i||{});return r.api.post(e+"/effects/pulse",n)}),r.cycle=((e,i)=>{e=o(e);let n=t.extend({states:[],defaults:{},direction:"forward"},i||{});return r.api.post(e+"/cycle",n)}),r.list_scenes=(()=>r.api.get("scenes",!1,"")),r.activate_scene=((e,o)=>{let i=t.extend({duration:null,ignore:[],overrides:{}},o||{});return r.api.put("scenes/"+e+"/activate",i,"")}),r.validate_color=(e=>r.api.get("color",{string:e},"")),r.set_color=((e,t,o)=>r.set_state(e,{color:"hue:"+t+" saturation:"+o+" kelvin:3500"})),r.set_white=((e,t)=>r.set_state(e,{color:"hue:0.0 saturation:0.0 kelvin:"+t}))}